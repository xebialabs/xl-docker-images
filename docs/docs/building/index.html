<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<title data-react-helmet="true">Building Docker images from generated Dockerfiles | DevOps Platform Docker Images</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://xebialabs.github.io/xl-docker-images/docs/building"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Building Docker images from generated Dockerfiles | DevOps Platform Docker Images"><meta data-react-helmet="true" name="description" content="To generate the images from the Dockerfiles the following commands can be used:"><meta data-react-helmet="true" property="og:description" content="To generate the images from the Dockerfiles the following commands can be used:"><link data-react-helmet="true" rel="shortcut icon" href="/xl-docker-images/img/digital_ai_deploy.svg"><link data-react-helmet="true" rel="canonical" href="https://xebialabs.github.io/xl-docker-images/docs/building"><link data-react-helmet="true" rel="alternate" href="https://xebialabs.github.io/xl-docker-images/docs/building" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://xebialabs.github.io/xl-docker-images/docs/building" hreflang="x-default"><link rel="stylesheet" href="/xl-docker-images/assets/css/styles.22a8eaea.css">
<link rel="preload" href="/xl-docker-images/assets/js/runtime~main.626af313.js" as="script">
<link rel="preload" href="/xl-docker-images/assets/js/main.25785e07.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xl-docker-images/"><div class="navbar__logo"><img src="/xl-docker-images/img/digital_ai_deploy.svg" alt="DevOps Platform Docker Images Digital.ai" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/xl-docker-images/img/digital_ai_deploy.svg" alt="DevOps Platform Docker Images Digital.ai" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">DevOps Platform Docker Images</b></a><a class="navbar__item navbar__link navbar__link--active" href="/xl-docker-images/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xebialabs/xl-docker-images" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-docker-images/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-docker-images/docs/prerequisites">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-docker-images/docs/generating">Generating the Dockerfiles for a new version of the DevOps Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/xl-docker-images/docs/building">Building Docker images from generated Dockerfiles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Configuration</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Building Docker images from generated Dockerfiles</h1></header><p>To generate the images from the Dockerfiles the following commands can be used:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --use-cache</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This command will only succeed if you&#x27;ve already downloaded the binaries for both components (XL Deploy and XL Release) of the XebiaLabs DevOps Platform. If you do not have these readily available, you can use the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-password </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">password</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This command will use the provided username and password to login to the XebiaLabs distribution site and download your copy of the XebiaLabs DevOps Platform to embed in the built image.</p><p>By default the images are generated with 3 different target operating systems:</p><ul><li>RedHat Enterprise Linux</li><li>Centos 7</li><li>Debian Slim</li><li>Amazon Linux</li></ul><p>If you only want to build a Docker image for a specific target operating system, use the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --target-os rhel --target-os centos --target-os debian-slim</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note: For rhel images you will need to build it in RedHat OS with valid RHEL subscription.</p><p>If you want to push Docker image while building you need to use <code>--push</code> and <code>--registry</code> with dockerhub organisation you need to push to which is by default xebialabs, see following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --target-os centos --push --registry xebialabs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="building-an-image-for-an-alpha-version-of-xl-deploy-or-xl-release">Building an image for an alpha version of XL Deploy or XL Release<a aria-hidden="true" class="hash-link" href="#building-an-image-for-an-alpha-version-of-xl-deploy-or-xl-release" title="Direct link to heading">â€‹</a></h3><p>Alpha versions are not released to Distribution site hence you will need to get those versions from nexus by specifying <code>--download-source</code>, see the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">LDAP username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-source nexus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you also want to push it to the xebialabsunsupported organisation, use the following commandline:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">LDAP username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-source nexus --push --registry xebialabsunsupported</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="development-versions">Development versions<a aria-hidden="true" class="hash-link" href="#development-versions" title="Direct link to heading">â€‹</a></h3><p>You can create &#x27;official&#x27; Docker versions from your SNAPSHOT server zips. (Tip: use <code>--target-os=centos</code> or <code>--target-os=debian-slim</code>.) Install your SNAPSHOTs into your local <code>.m2</code> folder (or explicitly specify one as below) and issue the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">localm2 </span><span class="token comment" style="color:#999988;font-style:italic"># looks inside ~/.m2/repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --download-source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">localm2 --m2location</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/tmp/foo/m2/repo</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This relies on <code>./applejack/conf/products/*.yml</code> each having a key <code>repositories.localm2</code> (sibling to <code>repositories.nexus</code> and <code>repositories.dist</code>) with a value specifying a relative path inside the repository (e.g. &#x27;com/xebialabs/deployit/xl-deploy-base/{version}/{product}-base-{version}-server.zip&#x27;)</p><p>For building an image for one specific product only, you can also just point to the specific zipfile to use:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./applejack.py build --xl-version </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --product</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xl-deploy --download-source</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">zip --zipfile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/tmp/foo/xld-9.0.0-SNAPSHOT.zip</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="database-driver-support">Database driver support<a aria-hidden="true" class="hash-link" href="#database-driver-support" title="Direct link to heading">â€‹</a></h3><p>Both XL Release and XL Deploy supports db2, mysql, mssql, postgresql, oracle database for production setups more information can be found on official documentation :</p><ul><li><p>XL-Release : <a href="https://docs.xebialabs.com/release/how-to/configure-the-xl-release-sql-repository-in-a-database.html" target="_blank" rel="noopener noreferrer">https://docs.xebialabs.com/release/how-to/configure-the-xl-release-sql-repository-in-a-database.html</a></p></li><li><p>XL-Deploy : <a href="https://docs.xebialabs.com/deploy/how-to/configure-the-xl-deploy-sql-repository.html" target="_blank" rel="noopener noreferrer">https://docs.xebialabs.com/deploy/how-to/configure-the-xl-deploy-sql-repository.html</a></p></li></ul><p>To connect with these databases both the products needs jdbc driver in the classpath, example:  inside <code>/opt/xebialabs/xl-release-server/lib</code> (for xl release).</p><p>By default with these official images we provide jdbc drivers for mysql, mssql and postgresql.</p><p>if you have a requirement to connect to the db2, oracle then you will need to provide jdbc drivers by creating your custom docker image on top of official image and copying jdbc drivers in the <code>lib</code> directory.</p><p>Example : Adding db2 jdbc driver in classpath of xl-release container</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">FROM xebialabs/xl-release:8.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADD db2jcc4-10.1.jar /opt/xebialabs/xl-release-server/lib</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/xl-docker-images/docs/generating"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Generating the Dockerfiles for a new version of the DevOps Platform</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/xl-docker-images/docs/manual/environment-variables"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Environment variables<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#building-an-image-for-an-alpha-version-of-xl-deploy-or-xl-release" class="table-of-contents__link toc-highlight">Building an image for an alpha version of XL Deploy or XL Release</a></li><li><a href="#development-versions" class="table-of-contents__link toc-highlight">Development versions</a></li><li><a href="#database-driver-support" class="table-of-contents__link toc-highlight">Database driver support</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/xl-docker-images/docs/intro">Tutorial</a></li><li class="footer__item"><a href="https://github.com/xebialabs/xl-docker-images" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 DevOps Platform Docker Images Digital.ai</div></div></div></footer></div>
<script src="/xl-docker-images/assets/js/runtime~main.626af313.js"></script>
<script src="/xl-docker-images/assets/js/main.25785e07.js"></script>
</body>
</html>