# Set up new installation
cd ${APP_HOME}/default-conf

if [ ! -f "${APP_HOME}/conf/{{ boot_conf }}" ]; then
  echo "No ${APP_HOME}/conf/{{ boot_conf }} file detected:"
  echo "... Generating {{ boot_conf }}"
  sed -e "s#\${CENTRAL_CONFIG_ENCRYPT_KEY}#${CENTRAL_CONFIG_ENCRYPT_KEY}#g" ${APP_HOME}/default-conf/{{ boot_conf }}.template > ${APP_HOME}/conf/{{ boot_conf }}
  echo "Done"
fi

# copy default configurations
echo "... Copying default configuration from ${APP_HOME}/default-conf"

for f in *; do
  if [[ $f == *.template ]]; then
    continue
  fi
  if [ -f ${APP_HOME}/conf/$f ]; then
    echo "... Not copying $f because it already exists in the conf directory"
  else
    echo "... Copying $f to the conf directory"
    cp -R $f ${APP_HOME}/conf/
  fi
done
cd ${APP_HOME}
echo "Done copying default configurations"