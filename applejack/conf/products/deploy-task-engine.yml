name: deploy-task-engine
dockerfiles:
  default: 'debian-slim'
  os:
    rhel: rhel/Dockerfile.j2
    debian-slim: debian-slim/Dockerfile.j2
    centos: centos/Dockerfile.j2
    amazonlinux: amazonlinux/Dockerfile.j2
repositories:
  nexus: 'https://nexus.xebialabs.com/nexus/service/local/repositories/{repo}/content/ai/digital/deploy/task-engine/{product}/{version}/{product}-{version}.zip'
  dist: 'https://dist.xebialabs.com/customer/xl-deploy/product/{version}/{product}-{version}.zip'
  localm2: 'ai/digital/deploy/task-engine/{product}/{version}/{product}-{version}.zip'
resources:
  target_name: '{product}-{version}.zip'
  dirs:
    - all
    - common
    - deploy-task-engine
context:
  license_server: https://download.xebialabs.com
  product: deploy-task-engine
  product_name: Deploy Worker
  boot_conf: deployit.conf
  product_description: Enterprise-scale Application Release Automation for any environment
  license_file: deployit-license.lic
  wrapper_conf: xld-wrapper.conf.common
  port: 8180
  volumes:
    - "${APP_HOME}/conf"
    - "${APP_HOME}/ext"
    - "${APP_HOME}/hotfix/lib"
    - "${APP_HOME}/hotfix/plugins"
    - "${APP_HOME}/plugins"
    - "${APP_HOME}/work"
  environment:
    - key: XL_ADDITIONAL_CONFIG_FILE
      value: ""
    - key: XL_HTTP_ENDPOINT
      value: ""
    - key: XL_KEY_PASSWORD
      value: "changeme"
    - key: XL_KEY_STORE
      value: "keystore"
    - key: XL_KEY_STORE_PASSWORD
      value: "changeme"
    - key: XL_MASTERS
      value: []
    - key: XL_SKIP_PORT_IN_API
      value: "true"
    - key: XL_SOCKET_TIMEOUT
      value: "30000"
    - key: XL_TRUST_STORE
      value: "truststore"
    - key: XL_TRUST_STORE_PASSWORD
      value: "changeme"
    - key: XL_WORKER_HOSTNAME
      value: ""
    - key: XL_WORKER_NAME
      value: "task-engine"
    - key: XL_WORKER_PORT
      value: "8180"
